'use strict';$("#ipfs-data").hide();$("#pg-data").hide();function makeid(b){for(var a="",c=0;c<b;c++)a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return a}function toast(b){Toastify({text:b,backgroundColor:"linear-gradient(to right, #ff416c, #ff4b2b)",className:"info",duration:2500}).showToast()}function setprogress(b){$("#progress_status").html(b)}$("input:file").change(function(){let b=document.getElementById("h_uri_h").files[0];$("#h_uri").val(b.name)});
$("#upload_nftx").click(async function(){event.preventDefault();$("#h_uri_h").click()});
$("#gogo").click(async function(){$("#btn_a").hide();$("#btn_b").hide();$("#loader").show();$("#progress_status").show();try{event.preventDefault();let c=$("#h_title").val(),h=$("#h_sym").val();var b=document.getElementById("h_uri_h").files,a=$("input[type=radio][name=dtype]:checked").val();let d="";if(""==c||""==h||void 0==a||0>=b.length)throw toast("Please fill all the details!"),"";if("ipfs"==a&&(d=$("#ipfs-api").val(),""==d))throw toast("Please fill all the details!"),"";setprogress("Checking metamask...");
await check_metamask()||toast("Metamask not found!");let l=await get_host_addr();setprogress("Uploading initial data on nft.storage...");let m=(await upload_nft({name:c,description:"NFT of Eclectic Art Gallery Template",role:"host",owner_addresss:l,image:b[0]},"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweDVlMjM0NEU4OTdiZjIyZjc2RDU2NDA5MjkzQkFlN0Y3ODFmYzg5QWUiLCJpc3MiOiJuZnQtc3RvcmFnZSIsImlhdCI6MTYyODgwMDA3NTY2OCwibmFtZSI6InRlc3QifQ._vXmDNn5-3JWSUMj4jfC-rJXgPpOgIjV9l83iB96LIM")).url;
setprogress("Initiating art gallery smart contract...");let k=await inti_contract(h,c,m);if("ipfs"==a){setprogress("Starting metaverse deployment process on ipfs...");let e=$("#ipfs-data").find("input");b={};a=0;if(1<e.length)for(let f=1;f<e.length;f+=2){let n=$(e[f]).val(),p=$(e[f]).val();""!=n&&""!=p&&(b[n]=p,a++)}a?initIpfsPinService(d,b):initIpfsPinService(d,null);setprogress("Metaverse upload started on ipfs...");await hostMetaverse(c);await storeJson(c,h,m,l,k,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweDVlMjM0NEU4OTdiZjIyZjc2RDU2NDA5MjkzQkFlN0Y3ODFmYzg5QWUiLCJpc3MiOiJuZnQtc3RvcmFnZSIsImlhdCI6MTYyODgwMDA3NTY2OCwibmFtZSI6InRlc3QifQ._vXmDNn5-3JWSUMj4jfC-rJXgPpOgIjV9l83iB96LIM");
let q=(await getDir("/"+c)).cid,g=[q.toString(),q.toV1().toString()];console.log(`LocalNode: https://${g[1]}.infura-ipfs.io/`);console.log(`LocalNode: https://ipfs.io/ipfs/${g[0]}`);setprogress("Metaverse uploaded sucessfully on ipfs...");setprogress("Done!");$("#metaverse_url").children("a").html(`https://${g[1]}.infura-ipfs.io/`);$("#contract_addr").children("a").html(k);$("#metaverse_url").children("a").attr("href",`https://${g[1]}.infura-ipfs.io/`);$("#contract_addr").children("a").attr("href",
`https://stardust-explorer.metis.io/address/${k}`);$("#progress_status").hide();$("#loader").hide();$("#metaverse_url").show();$("#contract_addr").show()}}catch(c){console.log(c),$("#btn_a").show(),$("#btn_b").show(),c&&toast("Something went wrong check console for more details.")}$("#progress_status").hide();$("#loader").hide()});$("#comming_soon").click(async function(){event.preventDefault();alert("Edit World Feature Coming Soon\ud83e\udd73.")});$("#wfh").click(function(){$("#login").modal("show")});
$("input[type=radio][name=dtype]").change(function(){"ipfs"==$(this).val()?($("#ipfs-data").show(),$("#pg-data").hide()):"web3s"==$(this).val()?$("#web3s-data").show():($("#ipfs-data").hide(),$("#pg-data").show())});
$("#add_btn").click(function(){let b=makeid(5),a;a='<div id="ob_'+b+'" style="display: flex; flex-direction:row;" class="material-textfield"><div><input  class="woei"  placeholder="key" type="text">';a+="</div>";a+='<div  style="margin-left: 5px;">';a+='<input  class="woei"  placeholder="value" type="text">';a+="</div>";a+='<div id="h_del" style="margin: 5px; align-self: center;background: red;" class="roar">';a+='<div class="minus">';a+="</div>";a+="</div>";a+="</div>";$("#ipfs-data").append(a);
$("#ob_"+b).on("click",'div[id="h_del"]',function(){$("#"+$(this).parent().attr("id")).remove()})});